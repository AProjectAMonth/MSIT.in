{% extends 'base.html' %} {% load staticfiles %} {% block navigation %} {% include 'navbar.html' %} {% endblock %} {% block body %}
<div class="container">
    <div class="row">
        {% block left_nav %} {% include 'left_menu.html' %} {% endblock %} {% block main_body %}
        <div class="col-md-7 col-sm-12 col-xs-12 col-lg-7 centralcontent">
            <h3>{{ heading }}</h3>
            <hr>
            <script type="text/javascript">
                $('#societytab a').click(function(e) {
                    e.preventDefault()
                    $(this).tab('show')
                })
            </script>
            <ul class="nav nav-tabs" id="tttab" role="tablist">
                {% for i in tabs %}
                <li {% if forloop.counter == 1 %}class="active" {% endif %}>
                    <a href="#{{i.title|slugify}}" aria-controls="{{i.title|slugify}}" role="tab" data-toggle="tab">{{i.title}}</a>
                </li>
                {% endfor %} {% if settings.display_1st_faculty %}
                <li>
                    <a href="#firstshift" aria-controls="firstshift" role="tab" data-toggle="tab">Faculty (1st shift)</a>
                </li>
                {% endif %} {% if settings.display_1st_assistant %}
                <li>
                    <a href="#firstshiftlab" aria-controls="firstshiftlab" role="tab" data-toggle="tab">Lab Faculty (1st shift)</a>
                </li>
                {% endif %} {% if settings.display_2nd_faculty %}
                <li>
                    <a href="#secondshift" aria-controls="secondshift" role="tab" data-toggle="tab">Faculty (2nd shift)</a>
                </li>
                {% endif %} {% if settings.display_2nd_assistant %}
                <li>
                    <a href="#secondshiftlab" aria-controls="secondshiftlab" role="tab" data-toggle="tab">Lab Faculty (2nd shift)</a>
                </li>
                {% endif %}
            </ul>
            <div class="tab-content">
                {% for i in tabs %}
                <div class="tab-pane {% if forloop.counter == 1 %}active{% endif %}" id="{{i.title|slugify}}" style="padding:1em;">
                    {{i.content|safe}}
                </div>
                {% endfor %} {% if settings.display_1st_faculty %}
                <div class="tab-pane" id="firstshift">

                  Order: <select class="order" id="order1">
                    <option selected value="1">Name</option>
                    <option value="2">Designation</option>
                    <option value="3">Date of joining</option>
                  </select>
                  By <select class="by" id="by1">
                    <option selected value="1">Ascending</option>
                    <option value="2">Descending</option>
                  </select>

                  <button class="sorter" type="button" name="button" onclick='sorter(1)'>Sort</button>

                    <div style="padding:1em;">
                        <table class="table-striped table-responsive firstshift-table" style="width:500px;" id=cse>
                            <tbody>
                                {% for i in morning %}
                                <tr>
                                    <td style="padding:1em;">
                                        <p><strong>{{i.title}}&nbsp;{{i.full_name}}</strong></p>

                                        <p>{{i.designation|slice:"1:"}} | {{ i.qualifications }}</p>

                                        <p>{{i.email}}</p>
                                    </td>
                                    {% if i.profile_pic %}
                                    <td style="float:right;"><img alt="" src="{{i.profile_pic.url}}" style="width: 100px; height: 100px; border-radius: 100%;"></td>
                                    {% endif %}
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>

                        <p>&nbsp;</p>

                        <p>&nbsp;</p>
                    </div>
                </div>
                {% endif %} {% if settings.display_1st_assistant %}
                <div class="tab-pane" id="firstshiftlab">

                  Order: <select class="order" id="order2">
                    <option selected value="1">Name</option>
                    <option value="2">Designation</option>
                    <option value="3">Date of joining</option>
                  </select>
                  By <select class="by" id="by2">
                    <option selected value="1">Ascending</option>
                    <option value="2">Descending</option>
                  </select>

                  <button class="sorter" type="button" name="button" onclick='sorter(2)'>Sort</button>

                    <div style="padding:1em;">
                        <table class="table-striped table-responsive firstshift-table" style="width:500px;" id=cse>
                            <tbody>
                                {% for i in mlab %}
                                <tr>
                                    <td style="padding:1em;">
                                        <p><strong>{{i.title}}&nbsp;{{i.full_name}}</strong></p>

                                        <p>{{i.designation|slice:"1:"}} | {{ i.qualifications }}</p>

                                        <p>{{i.email}}</p>
                                    </td>
                                    <td style="float:right;"><img alt="" src="{{i.profile_pic.url}}" style="width: 100px; height: 100px; border-radius: 100%;"></td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>

                        <p>&nbsp;</p>

                        <p>&nbsp;</p>
                    </div>
                </div>
                {% endif %} {% if settings.display_2nd_faculty %}
                <div class="tab-pane" id="secondshift">

                  Order: <select class="order" id="order3">
                    <option selected value="1">Name</option>
                    <option value="2">Designation</option>
                    <option value="3">Date of joining</option>
                  </select>
                  By <select class="by" id="by3">
                    <option selected value="1">Ascending</option>
                    <option value="2">Descending</option>
                  </select>

                  <button class="sorter" type="button" name="button" onclick='sorter(3)'>Sort</button>

                    <div style="padding:1em;">
                        <table class="table-striped table-responsive firstshift-table" style="width:500px;" id=cse>
                            <tbody>
                                {% for i in evening %}
                                <tr>
                                    <td style="padding:1em;">
                                        <p><strong>{{i.title}}&nbsp;{{i.full_name}}</strong></p>

                                        <p>{{i.designation|slice:"1:"}} | {{ i.qualifications }}</p>

                                        <p>{{i.email}}</p>
                                    </td>
                                    <td style="float:right;"><img alt="" src="{{i.profile_pic.url}}" style="width: 100px; height: 100px; border-radius: 100%;"></td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>

                        <p>&nbsp;</p>

                        <p>&nbsp;</p>
                    </div>
                </div>
                {% endif %} {% if settings.display_2nd_assistant %}
                <div class="tab-pane" id="secondshiftlab">

                  Order: <select class="order" id="order4">
                    <option selected value="1">Name</option>
                    <option value="2">Designation</option>
                    <option value="3">Date of joining</option>
                  </select>
                  By <select class="by" id="by4">
                    <option selected value="1">Ascending</option>
                    <option value="2">Descending</option>
                  </select>

                  <button class="sorter" type="button" name="button" onclick='sorter(4)'>Sort</button>

                    <div style="padding:1em;">
                        <table class="table-striped table-responsive firstshift-table" style="width:500px;" id=cse>
                            <tbody>
                                {% for i in elab %}
                                <tr>
                                    <td style="padding:1em;">
                                        <p><strong>{{i.title}}&nbsp;{{i.full_name}}</strong></p>

                                        <p>{{i.designation|slice:"1:"}} | {{ i.qualifications }}</p>

                                        <p>{{i.email}}</p>
                                    </td>
                                    <td style="float:right;"><img alt="" src="{{i.profile_pic.url}}" style="width: 100px; height: 100px; border-radius: 100%;"></td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>

                        <p>&nbsp;</p>

                        <p>&nbsp;</p>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
        {% endblock %} {% block right_nav %} {% include 'right_menu.html' %} {% endblock %}
    </div>
</div>
<script>

  /* Hey there!

  Sometimes in life you try to fix something to fix something else which may
  fix the other fix but the fix you try to fix needs one more fix you so
  finaly end up with something like the code below.

  help? => vigzmv@outlook.com

  */

  try{
    var order = window.location.pathname.match(/\d+/)[0];
    if(order == "") order = '1';
    $('.order').val(order);
  } catch(err){}

  try {
    var by = window.location.pathname.replace(/.*\D/g, '')
    if(by == "") by = '1';
    $('.by').val(by);
  } catch(err){}

  function changeLoc(sort, order){
    window.location = window.location.protocol + '//' + window.location.host + '/' +
    window.location.pathname.replace(/^\/([^\/]*).*$/, '$1') + '/' + sort + '/' +
    order + window.location.hash;
  }

  function sorter(id){
    changeLoc($('#order' + id).val(), $('#by' + id).val());
  }

  $("#tttab > li > a").on("shown.bs.tab", function(e) {
    window.location.hash = $(e.target).attr("href").substr(1) + 's';
  });

  var hash = window.location.hash;
  $('#tttab > li > a[href="' + hash.slice(0, -1) + '"]').tab('show');

</script>

{% endblock %}
